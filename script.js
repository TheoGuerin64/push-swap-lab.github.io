function checkIfDuplicateExists(e){return new Set(e).size!==e.length}function getRandomInt(e,n){return Math.round(Math.random()*(n-e)+e)}function parse_error(e,n){e.innerHTML="";var t=document.createElement("li");t.textContent="error",e.append(t)}function updateRange(e){"range"==e.value?document.getElementsByClassName("range")[0].style.display="flex":document.getElementsByClassName("range")[0].style.display="none"}function switch_popup(){var e=document.getElementById("generate_popup");"none"==e.style.display||""==e.style.display?e.style.display="flex":e.style.display="none"}function generate_numbers(){var e,n=document.getElementsByClassName("select_type")[0],t=parseInt(document.getElementsByClassName("size")[0].value);if(result=[],!isNaN(t)&&t>=1&&t<=1e3){if("random"==n.value){for(let r=0;r<t;r++)e=getRandomInt(-2147483648,2147483647),result.includes(e)?r--:result.push(e);document.getElementById("stack_input").value=result.join(" "),switch_popup()}else if("range"==n.value){var l=parseInt(document.getElementsByClassName("min_range")[0].value),i=parseInt(document.getElementsByClassName("max_range")[0].value);if(!isNaN(l)&&!isNaN(i)&&l<=i&&i-l+1>=t){for(let a=0;a<t;a++)e=getRandomInt(l,i),result.includes(e)?a--:result.push(e);document.getElementById("stack_input").value=result.join(" "),switch_popup()}}}}function import_history(){var e=window.prompt("History:","commands");if(e)for(let n of e.split(" "))window[n]()}function command(e){return function(n=!1){var t=document.getElementById("history");if(e(document.getElementById("stack_a"),document.getElementById("stack_b"))){if(n)t.children[0].innerText="Total: "+(parseInt(t.children[0].innerText.slice(7))-1),t.removeChild(t.children[1]);else{t.children[0].innerText="Total: "+(parseInt(t.children[0].innerText.slice(7))+1);var r=document.createElement("li");r.textContent=e.name,t.childElementCount>1?t.insertBefore(r,t.children[1]):t.append(r)}}}}function sa(e,n){if(e.childElementCount<2)return!1;var t=e.children[0].textContent;return e.children[0].textContent=e.children[1].textContent,e.children[1].textContent=t,!0}function sb(e,n){if(n.childElementCount<2)return!1;var t=n.children[0].textContent;return n.children[0].textContent=n.children[1].textContent,n.children[1].textContent=t,!0}function ss(e,n){var t;return!(e.childElementCount<2)&&!(n.childElementCount<2)&&(t=e.children[0].textContent,e.children[0].textContent=e.children[1].textContent,e.children[1].textContent=t,t=n.children[0].textContent,n.children[0].textContent=n.children[1].textContent,n.children[1].textContent=t,!0)}function pa(e,n){return 0!=n.childElementCount&&(e.childElementCount>0?e.insertBefore(n.children[0],e.children[0]):e.append(n.children[0]),!0)}function pb(e,n){return 0!=e.childElementCount&&(n.childElementCount>0?n.insertBefore(e.children[0],n.children[0]):n.append(e.children[0]),!0)}function ra(e,n){return e.childElementCount>1&&e.append(e.children[0]),!0}function rb(e,n){return n.childElementCount>1&&n.append(n.children[0]),!0}function rr(e,n){return e.childElementCount>1&&e.append(e.children[0]),n.childElementCount>1&&n.append(n.children[0]),!0}function rra(e,n){return e.childElementCount>1&&e.insertBefore(e.lastChild,e.children[0]),!0}function rrb(e,n){return n.childElementCount>1&&n.insertBefore(n.lastChild,n.children[0]),!0}function rrr(e,n){return e.childElementCount>1&&e.insertBefore(e.lastChild,e.children[0]),n.childElementCount>1&&n.insertBefore(n.lastChild,n.children[0]),!0}document.getElementById("stack_input").onkeydown=function(e){if("Enter"==e.key){var n,t,r=document.getElementById("stack_a"),l=document.getElementById("stack_b"),i=document.getElementById("history"),a=document.getElementById("stack_input").value;if(r.innerHTML="",l.innerHTML="",i.innerHTML="",(t=document.createElement("li")).textContent="Total: 0",i.append(t),checkIfDuplicateExists(n=a.split(" "))){parse_error(r,l);return}for(let c of n){if(isNaN(parseInt(c))){parse_error(r,l);return}(t=document.createElement("li")).textContent=c,r.append(t)}}},document.onkeydown=function(e){if("z"==e.key&&e.ctrlKey){var n=document.getElementById("history");if(n.childElementCount>1)switch(n.children[1].innerText){case"sa":sa(!0);break;case"sb":sb(!0);break;case"ss":ss(!0);break;case"pa":pb(!0);break;case"pb":pa(!0);break;case"ra":rra(!0);break;case"rb":rrb(!0);break;case"rr":rrr(!0);break;case"rra":ra(!0);break;case"rrb":rb(!0);break;case"rrr":rr(!0);break;default:console.error("History error: this command doesn't exist.")}}},sa=command(sa),sb=command(sb),ss=command(ss),pa=command(pa),pb=command(pb),ra=command(ra),rb=command(rb),rr=command(rr),rra=command(rra),rrb=command(rrb),rrr=command(rrr),updateRange(document.getElementsByClassName("select_type")[0]);
