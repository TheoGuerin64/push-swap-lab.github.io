var redo=[];function checkIfDuplicateExists(e){return new Set(e).size!==e.length}function getRandomInt(e,n){return Math.round(Math.random()*(n-e)+e)}function parse_error(e,n){e.innerHTML="";var t=document.createElement("li");t.textContent="error",e.append(t)}function updateRange(e){"range"==e.value?document.getElementsByClassName("range")[0].style.display="flex":document.getElementsByClassName("range")[0].style.display="none"}function switch_popup(){var e=document.getElementById("generate_popup");"none"==e.style.display||""==e.style.display?e.style.display="flex":e.style.display="none"}function generate_numbers(){var e,n=document.getElementsByClassName("select_type")[0],t=parseInt(document.getElementsByClassName("size")[0].value);if(result=[],!isNaN(t)&&t>=1&&t<=1e3){if("random"==n.value){for(let r=0;r<t;r++)e=getRandomInt(-2147483648,2147483647),result.includes(e)?r--:result.push(e);document.getElementById("stack_input").value=result.join(" "),switch_popup()}else if("range"==n.value){var l=parseInt(document.getElementsByClassName("min_range")[0].value),a=parseInt(document.getElementsByClassName("max_range")[0].value);if(!isNaN(l)&&!isNaN(a)&&l<=a&&a-l+1>=t){for(let i=0;i<t;i++)e=getRandomInt(l,a),result.includes(e)?i--:result.push(e);document.getElementById("stack_input").value=result.join(" "),switch_popup()}}}}function import_history(){var e=window.prompt("History:","commands");if(e)for(let n of e.split(" "))window[n]()}function command(e){return function(n=!1,t=""){var r=document.getElementById("history");if(e(document.getElementById("stack_a"),document.getElementById("stack_b"))){if(n)redo.unshift(t),r.children[0].innerText="Total: "+(parseInt(r.children[0].innerText.slice(7))-1),r.removeChild(r.children[1]);else{""==t&&(redo=[]),r.children[0].innerText="Total: "+(parseInt(r.children[0].innerText.slice(7))+1);var l=document.createElement("li");l.textContent=e.name,r.childElementCount>1?r.insertBefore(l,r.children[1]):r.append(l)}}}}function sa(e,n){if(e.childElementCount<2)return!1;var t=e.children[0].textContent;return e.children[0].textContent=e.children[1].textContent,e.children[1].textContent=t,!0}function sb(e,n){if(n.childElementCount<2)return!1;var t=n.children[0].textContent;return n.children[0].textContent=n.children[1].textContent,n.children[1].textContent=t,!0}function ss(e,n){var t;return!(e.childElementCount<2)&&!(n.childElementCount<2)&&(t=e.children[0].textContent,e.children[0].textContent=e.children[1].textContent,e.children[1].textContent=t,t=n.children[0].textContent,n.children[0].textContent=n.children[1].textContent,n.children[1].textContent=t,!0)}function pa(e,n){return 0!=n.childElementCount&&(e.childElementCount>0?e.insertBefore(n.children[0],e.children[0]):e.append(n.children[0]),!0)}function pb(e,n){return 0!=e.childElementCount&&(n.childElementCount>0?n.insertBefore(e.children[0],n.children[0]):n.append(e.children[0]),!0)}function ra(e,n){return e.childElementCount>1&&e.append(e.children[0]),!0}function rb(e,n){return n.childElementCount>1&&n.append(n.children[0]),!0}function rr(e,n){return e.childElementCount>1&&e.append(e.children[0]),n.childElementCount>1&&n.append(n.children[0]),!0}function rra(e,n){return e.childElementCount>1&&e.insertBefore(e.lastChild,e.children[0]),!0}function rrb(e,n){return n.childElementCount>1&&n.insertBefore(n.lastChild,n.children[0]),!0}function rrr(e,n){return e.childElementCount>1&&e.insertBefore(e.lastChild,e.children[0]),n.childElementCount>1&&n.insertBefore(n.lastChild,n.children[0]),!0}document.getElementById("stack_input").onkeydown=function(e){if("Enter"==e.key){var n,t,r=document.getElementById("stack_a"),l=document.getElementById("stack_b"),a=document.getElementById("history"),i=document.getElementById("stack_input").value;if(redo=[],r.innerHTML="",l.innerHTML="",a.innerHTML="",(t=document.createElement("li")).textContent="Total: 0",a.append(t),checkIfDuplicateExists(n=i.split(" "))){parse_error(r,l);return}for(let c of n){if(isNaN(parseInt(c))){parse_error(r,l);return}(t=document.createElement("li")).textContent=c,r.append(t)}}},document.onkeydown=function(e){if("z"==e.key&&e.ctrlKey){var n=document.getElementById("history");if(n.childElementCount>1)switch(n.children[1].innerText){case"sa":sa(!0,"sa");break;case"sb":sb(!0,"sb");break;case"ss":ss(!0,"ss");break;case"pa":pb(!0,"pa");break;case"pb":pa(!0,"pb");break;case"ra":rra(!0,"ra");break;case"rb":rrb(!0,"rb");break;case"rr":rrr(!0,"rr");break;case"rra":ra(!0,"rra");break;case"rrb":rb(!0,"rrb");break;case"rrr":rr(!0,"rrr");break;default:console.error("History error: this command doesn't exist.")}}else("y"==e.key&&e.ctrlKey||"Z"==e.key&&e.ctrlKey)&&0!=redo.length&&(window[redo[0]](!1,"r"),redo.shift())},sa=command(sa),sb=command(sb),ss=command(ss),pa=command(pa),pb=command(pb),ra=command(ra),rb=command(rb),rr=command(rr),rra=command(rra),rrb=command(rrb),rrr=command(rrr),updateRange(document.getElementsByClassName("select_type")[0]);
